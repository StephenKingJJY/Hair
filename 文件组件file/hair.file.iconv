;单独的过程用来转换文件编码格式
;使用资源文件夹中的iconv.exe
;命令版本号v1.4
;不公开

to hair.file.iconv :name :fcode :tcode
;首先拷贝文件到资源目录
hair.base.copyfile :name (word :hair_maindir "\\ :hair_res "\\ :name)
;使用iconv转换文件编码
ignore (shell (se [cmd /c] (word "\" :hair_maindir "\\ :hair_res "\\iconv.exe "\") [-f] :fcode [-t] :tcode :name [> iconv_temp.htxt]) "true)
;删除原本的文件
erasefile :name
;重命名转化后的文件
hair.base.rename "iconv_temp.htxt :name
end
bury "hair.file.iconv
