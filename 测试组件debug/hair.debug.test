;帮助用户在当前窗口中测试程序
;目前的逻辑是删除所有hair框架运行时留下的过程、变量等，然后重新启动程序
;中间给出相应的提示，让用户清理相应的程序
;命令版本号v1.2

to hair.debug.test
hair.detect
localmake "stpro run word first hair.object.select "project ".startup
if not PROCEDURE? :stpro [hair.debug.error "找不到入口过程 stop]
messagebox [警告][您正在试图测试基于hair框架的程序，测试工具会清理workspace中所有你亲自书写的过程以外的所有内容，包括hair框架本身。
  我们建议您遵循hair程序开发规范，将所有的预定义变量、组等内容写入主过程中，不要把任何内容写在过程之外。点击确定即开始清理！]
pr "清理hair框架中..
hair.exit
pr "框架清理完成..即将删除下面的变量和plist，请确保已将其写入过程中
localmake "hair_debug_test (list [] (remove "stpro item 2 contents) item 3 contents)
show :hair_debug_test
bury :hair_debug_test
pr "删除完成，开始重启hair框架...
wait 600/5 ;等待两秒
hair
run :stpro
end
bury "hair.debug.test
